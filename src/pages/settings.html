<!DOCTYPE HTML>
<html lang="en">
	<head>
		<title>
			E621 Downloader - Settings
		</title>
		<meta charset="UTF-8">
		<!-- https://electronjs.org/docs/tutorial/security#csp-meta-tag -->
		<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';">
		<link rel="stylesheet" href="../assets/css/index.css" />
		<script src="../assets/js/main.js"></script>
	</head>
	<body>
		<form id="main" onsubmit="handleSubmit(this); return false;">
			<table>
				<tbody id="settings">
					<tr>
						<td class="input">
							<label for="key">E621 API Key</label>
							<input type="text" name="key" placeholder="Your e621 api key.">
						</td>
					</tr>
					<tr>
						<td class="input">
							<label for="username">E621 Username</label>
							<input type="text" name="username" placeholder="Your e621 username.">
						</td>
					</tr>
					<tr>
						<td class="input">
							<label for="saveDirectory">Save Directory</label>
							<input type="text" name="saveDirectory" placeholder="Location to save images to">
						</td>
					</tr>
					<tr>
						<td >
							<label for="">Overwrite existing</label>
							<br>
							<br>
							<label class="switch">
								<input name="overwriteExisting" type="checkbox">
								<span class="slider round"></span>
							  </label>
						</td>
						
					</tr>
					<tr>
						<td class="submit">
							<input type="submit" value="Submit">
						</td>
					</tr>
				</tbody>
			</table>
		</form>
		<script>
			const key = document.querySelector("input[name=key]");
			const username = document.querySelector("input[name=username]");
			const saveDirectory = document.querySelector("input[name=saveDirectory]");
			const overwriteExisting = document.querySelector("input[name=overwriteExisting]");

			window.addEventListener("DOMContentLoaded", () => {
				setTimeout(() => {
					if(!window.config) window.location.reload();
					debugLog();
					key.value = config.key || "";
					username.value = config.username || "";
					saveDirectory.value = config.saveDirectory || "";
					if(config.overwriteExisting) overwriteExisting.checked = "checked";
				}, 100);
			});
			/**
			 * @param {HTMLFormElement} e
			 */
			function handleSubmit(e) {}
		</script>
		<a href="./index.html" class="bottom-left"">Back</a>
	</body>
</html>
